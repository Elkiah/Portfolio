(function(e){e.fn.twentytwenty=function(t){var t=e.extend({default_offset_pct:.5,orientation:"horizontal",follow_mouse:!1},t);return this.each(function(){var n=t.default_offset_pct,r=e(this),i=t.orientation,s=i==="vertical"?"down":"left",o=i==="vertical"?"up":"right";r.wrap("<div class='twentytwenty-wrapper twentytwenty-"+i+"'></div>");r.append("<div class='twentytwenty-overlay'></div>");var u=r.find("img:first"),a=r.find("img:last");r.append("<div class='twentytwenty-handle'></div>");var f=r.find(".twentytwenty-handle");f.append("<span class='twentytwenty-"+s+"-arrow'></span>");f.append("<span class='twentytwenty-"+o+"-arrow'></span>");r.addClass("twentytwenty-container");u.addClass("twentytwenty-before");a.addClass("twentytwenty-after");var l=r.find(".twentytwenty-overlay");l.append("<div class='twentytwenty-before-label'></div>");l.append("<div class='twentytwenty-after-label'></div>");var c=function(e){var t=u.width(),n=u.height();return{w:t+"px",h:n+"px",cw:e*t+"px",ch:e*n+"px"}},h=function(e){i==="vertical"?u.css("clip","rect(0,"+e.w+","+e.ch+",0)"):u.css("clip","rect(0,"+e.cw+","+e.h+",0)");r.css("height",e.h)},p=function(e){var t=c(e);f.css(i==="vertical"?"top":"left",i==="vertical"?t.ch:t.cw);h(t)},d=function(e){if(r.hasClass("active")){n=i==="vertical"?(e.pageY-offsetY)/imgHeight:(e.pageX-v)/m;n<0&&(n=0);n>1&&(n=1);p(n)}};e(window).on("resize.twentytwenty",function(e){p(n)});var v=0,m=0;f.on("movestart",function(e){(e.distX>e.distY&&e.distX<-e.distY||e.distX<e.distY&&e.distX>-e.distY)&&i!=="vertical"?e.preventDefault():(e.distX<e.distY&&e.distX<-e.distY||e.distX>e.distY&&e.distX>-e.distY)&&i==="vertical"&&e.preventDefault();r.addClass("active");v=r.offset().left;offsetY=r.offset().top;m=u.width();imgHeight=u.height()});f.on("moveend",function(e){r.removeClass("active")});f.on("move",function(e){d(e)});r.find("img").on("mousedown",function(e){e.preventDefault()});if(t.follow_mouse){l.children().css("opacity","1");r.on("mousemove touchmove",function(e){l.children().css("opacity","0");r.addClass("active");v=r.offset().left;offsetY=r.offset().top;m=u.width();imgHeight=u.height();d(e)});r.on("mouseleave touchend",function(e){r.removeClass("active");l.children().css("opacity","1")})}e(window).trigger("resize.twentytwenty")})}})(jQuery);