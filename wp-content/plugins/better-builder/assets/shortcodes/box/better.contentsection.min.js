/*!
 * Content Section helper JS
 * Copyright (c) 2014 Intense Visions, Inc.
 */
/* global jQuery, skrollr */
// Resize the content-section divs and apply parallax effect
!function(a){a.fn.intenseParallax=function(){var b=a(window).width();
// Parallax Scripts
return this.each(function(c){var d=a(this);d.addClass("parallax");function e(c){var e;e=601>b?d.outerHeight()>0?d.outerHeight():d.find("img").height():d.outerHeight()>0?d.outerHeight():500;var f=d.find("img").first(),g=f.height(),h=g-e,i=d.offset().top+e,j=d.offset().top,k=a(window).scrollTop(),l=window.innerHeight,m=k+l,n=(m-j)/(e+l),o=Math.round(h*n);
//console.warn(img_height + " - " + container_height + " = " + (img_height - container_height));
c&&f.css("display","block"),i>k&&k+l>j&&f.css("transform","translate3D(-50%,"+o+"px, 0)")}
// Wait for image load
d.find("img").one("load",function(){e(!0)}).each(function(){this.complete&&a(this).trigger("load")}),a(window).scroll(function(){b=a(window).width(),e(!1)}),a(window).resize(function(){b=a(window).width(),e(!1)})})}}(jQuery);function intenseLoadContentSections(){"use strict";var a=/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera),b=jQuery,c=b("#content-section-nav"),d=b("#content-section-nav > ul"),e=!1;0===c.length&&(c=b('<nav id="intense-contentsection-nav">'),d=b('<ul rol="navigation"></ul>').appendTo(c),b("body").on("click",".nav-link",function(){var a=b(this).data("section");jQuery("html, body").stop().animate({scrollTop:jQuery("#"+a).offset().top},1e3)})),jQuery(".content-section").each(function(){var c=jQuery(this),f=null;if(c.data("navigation")){var g=c.attr("title"),h=b('<li class="nav-link" role="link" data-section="'+c.attr("id")+'">'+(""!==g?'<span class="label">'+g+"</span>":"")+'<span class="dot"/></li>');e=!0,d.append(h),c.appear(function(){b(".nav-link").removeClass("active"),h.addClass("active")},{one:!1,accX:50,accY:-50})}if(c.hasClass("breakout")){var i=b(window).width();c.data("original_margin_left")?c.css("margin-left",c.data("original_margin_left")):c.data("original_margin_left",c.css("margin-left")),c.data("original_margin_right")?c.css("margin-right",c.data("original_margin_right")):c.data("original_margin_right",c.css("margin-right"));var j=c.offset().left,k=i-(j+c.outerWidth());c.css("margin-left","-"+j+"px").css("margin-right","-"+k+"px")}if(c.hasClass("parallax"))if(a=!0){var l=c.data("bg");(void 0===l||""===l)&&(l=c.css("background-image")),l=l.replace("url(","").replace(")","").replace(/\"/gi,""),c.find(".parallax").remove(),c.addClass("parallax-container").removeClass("parallax").prepend('<div class="parallax"><img src="'+l+'" /></div>'),c.intenseParallax()}else f=skrollr.init({forceHeight:!1,mobileCheck:function(){
//hack - forces mobile version to be off
return!1}});if(c.hasClass("fixed")&&a&&(c.css("background-position","center center"),c.css("background-attachment","scroll")),c.hasClass("full-height")){var m=c.data("height-adjustment");m||(m=0),c.css("min-height",jQuery(window).height()-jQuery("#wpadminbar").outerHeight()-m+"px"),f&&f.refresh()}if(c.hasClass("zoom-in")&&(c.mouseenter(function(){}),c.mouseleave(function(){c.removeClass("zoomed-in").addClass("zoomed-out")}),c.mousemove(function(){c.hasClass("zoomed-in")||c.addClass("zoomed-in").removeClass("zoomed-out")})),c.data("video-id")){a&&
//overlays won't work because they need to be able to 
//press the play button so remove them from mobile
jQuery(".overlay-background").remove();var n=c.okvideo({target:c.attr("id"),video:c.data("video-id"),autoplay:c.data("video-autoplay"),disablekeyControl:0,captions:0,loop:!a,hd:1,annotations:0,volume:c.data("video-volume"),cover:1,controls:0,onReady:function(){jQuery("#"+c.attr("id")+"-player-okplayer").css("z-index","-2")}}),o=b("#"+c.attr("id")+"-buttons");
//Restart, Play/Pause, and Volume buttons
//Play/Pause click
b("a."+c.attr("id")+"-pause").on("click",function(a){a.preventDefault(),jQuery(".okvideo.youtube,.okvideo.vimeo").each(function(){var a=jQuery(this).data("okoptions"),d=c.attr("id")+"-player";if(d===a.id){var e=window["okvideoplayer_"+d];jQuery(this).hasClass("youtube")&&(1===e.getPlayerState()?(e.pauseVideo(),b("a."+c.attr("id")+"-pause use").attr("xlink:href","#better-font-awesome-play"),b("a."+c.attr("id")+"-pause").attr("title","Play")):(e.playVideo(),b("a."+c.attr("id")+"-pause use").attr("xlink:href","#better-font-awesome-pause"),b("a."+c.attr("id")+"-pause").attr("title","Pause"))),jQuery(this).hasClass("vimeo")&&(e.paused?(e.api("play"),e.paused=!1,b("a."+c.attr("id")+"-pause use").attr("xlink:href","#better-font-awesome-pause"),b("a."+c.attr("id")+"-pause").attr("title","Pause")):(e.api("pause"),e.paused=!0,b("a."+c.attr("id")+"-pause use").attr("xlink:href","#better-font-awesome-play"),b("a."+c.attr("id")+"-pause").attr("title","Play")))}})}),
//Volume click
b("a."+c.attr("id")+"-volume").on("click",function(a){a.preventDefault(),jQuery(".okvideo.youtube,.okvideo.vimeo").each(function(){var a=jQuery(this).data("okoptions"),d=c.attr("id")+"-player";if(d===a.id){var e=window["okvideoplayer_"+d];jQuery(this).hasClass("youtube")&&(e.getVolume()>0?(e.setVolume(0),b("a."+c.attr("id")+"-volume use").attr("xlink:href","#better-font-awesome-volume-off"),b("a."+c.attr("id")+"-volume").attr("title","Turn Volume On")):(e.setVolume(100),b("a."+c.attr("id")+"-volume use").attr("xlink:href","#better-font-awesome-volume-up"),b("a."+c.attr("id")+"-volume").attr("title","Turn Volume Off"))),jQuery(this).hasClass("vimeo")&&e.api("getVolume",function(a,d){a>0?(e.api("setVolume",0),b("a."+c.attr("id")+"-volume use").attr("xlink:href","#better-font-awesome-volume-off"),b("a."+c.attr("id")+"-volume").attr("title","Turn Volume On")):(e.api("setVolume",1),b("a."+c.attr("id")+"-volume use").attr("xlink:href","#better-font-awesome-volume-up"),b("a."+c.attr("id")+"-volume").attr("title","Turn Volume Off"))})}})}),
//Restart click
b("a."+c.attr("id")+"-refresh").on("click",function(a){a.preventDefault(),jQuery(".okvideo.youtube,.okvideo.vimeo").each(function(){var a=jQuery(this).data("okoptions"),b=c.attr("id")+"-player";if(b===a.id){var d=window["okvideoplayer_"+b];jQuery(this).hasClass("youtube")&&d.seekTo(1,!0),jQuery(this).hasClass("vimeo")&&d.api("seekTo",0)}})})}}),e&&(c.appendTo("body"),c.css("margin-top",c.outerHeight()/-2),c.show(),c.fadeTo(0,1))}!function(a){"use stict";a(window).load(function(){intenseLoadContentSections(),a(window).resize(function(){intenseLoadContentSections()})})}(jQuery);