/*
 * OKVideo by OKFocus v2.3.2
 * http://okfoc.us
 *
 * Copyright 2014, OKFocus
 * Licensed under the MIT license.
 *
 */
function vimeoPlayerReady(){jQuery(".okvideo.vimeo").each(function(){var a=jQuery(this).data("okoptions"),b=jQuery("#"+a.id+"-okplayer")[0];player=$f(b),window.setTimeout(function(){jQuery("#"+a.id+"-okplayer").css("visibility","visible")},2e3),player.addEvent("ready",function(){var b=jQuery("#"+a.id+"-okplayer")[0];player=$f(b),OKEvents.v.onReady(a.id+"-okplayer"),OKEvents.utils.isMobile()?OKEvents.v.onPlay(a.id+"-okplayer"):(player.addEvent("play",OKEvents.v.onPlay),player.addEvent("pause",OKEvents.v.onPause),player.addEvent("finish",OKEvents.v.onFinish)),player.api("play")}),window["okvideoplayer_"+a.id]=player})}function onYouTubePlayerAPIReady(){jQuery(".okvideo.youtube").each(function(){var a=jQuery(this).data("okoptions");player=new YT.Player(a.id+"-okplayer",{videoId:a.video?a.video.id:null,playerVars:{autohide:1,autoplay:a.autoplay,height:a.video.height,width:a.video.width,disablekb:a.keyControls,cc_load_policy:a.captions,controls:a.controls,volume:a.volume,target:a.target,enablejsapi:1,fs:0,modestbranding:1,iv_load_policy:a.annotations,loop:a.loop,showinfo:0,rel:0,wmode:"opaque",hd:a.hd,theme:"dark"},events:{onReady:OKEvents.yt.ready,onStateChange:OKEvents.yt.onStateChange,onError:OKEvents.yt.error}}),window["okvideoplayer_"+a.id]=player})}var player,OKEvents,options;!function(a){"use strict";var b="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw%3D%3D";a.okvideo=function(c){"object"!=typeof c&&(c={video:c});var d=this;d.init=function(){d.options=a.extend({},a.okvideo.options,c),null===d.options.video&&(d.options.video=d.options.source),d.options.target||(d.options.target=a("body")),d.setOptions();var k,l,m,e=d.options.target||a("body"),f=e[0]==a("body")[0]?"fixed":"absolute",g=9/16,h=e.height()/e.width(),i=e.height(),j=e.width(),n=0,o=0;e.addClass("okvideo"),e.addClass(d.options.video.provider),1===d.options.cover&&(e[0]==a("body")[0]&&(h=window.innerHeight/window.innerWidth,i=window.innerHeight,j=window.innerWidth),h>g?(m=i/9,l=Math.round(16*m,0),k=i,n=-1*Math.round((l-j)/2,0)+"px"):(m=j/16,k=Math.round(9*m,0),l=j,o=-1*Math.round((k-i)/2,0)+"px")),e.css({position:"relative"});var p=3===d.options.controls?-999:"auto",q='<div id="'+d.options.id+'-mask" style="position:'+f+';left:0;top:0;overflow:hidden;z-index:-998;height:100%;width:100%;"></div>';OKEvents.utils.isMobile()?e.append('<div id="'+d.options.id+'-okplayer" style="position:'+f+";left:"+n+";top:"+o+";overflow:hidden;z-index:"+p+';height:100%;width:100%;"></div>'):(3===d.options.controls&&e.append(q),1===d.options.adproof?e.append('<div id="'+d.options.id+'-okplayer" style="position:'+f+";left:-10%;top:-10%;overflow:hidden;z-index:"+p+';height:120%;width:120%;"></div>'):e.append('<div id="'+d.options.id+'-okplayer" style="position:'+f+";left:"+n+";top:"+o+";overflow:hidden;z-index:"+p+";height:"+k+"px;width:"+l+'px;"></div>')),a("#"+d.options.id+"-mask").css("background-image","url("+b+")"),null===d.options.playlist.list?"youtube"===d.options.video.provider?(d.options.video.height=k,d.options.video.width=l,d.loadYouTubeAPI()):"vimeo"===d.options.video.provider&&(d.options.volume/=100,d.loadVimeoAPI()):d.loadYouTubeAPI()},d.setOptions=function(){for(var b in this.options)this.options[b]===!0&&(this.options[b]=1),this.options[b]===!1&&(this.options[b]=3);if(null===d.options.playlist.list&&(d.options.video=d.determineProvider()),!d.options.id){var c=a(d.options.target).attr("id");c||(c="better_"+Math.floor(1e3*Math.random()+1),a(d.options.target).attr("id",c)),d.options.id=c+"-player"}a(d.options.target).data("okoptions",d.options)},d.loadYouTubeAPI=function(a){d.insertJS("//www.youtube.com/player_api")},d.loadYouTubePlaylist=function(){player.loadPlaylist(d.options.playlist.list,d.options.playlist.index,d.options.playlist.startSeconds,d.options.playlist.suggestedQuality)},d.loadVimeoAPI=function(){a("#"+d.options.id+"-okplayer").replaceWith(function(){return'<iframe src="//player.vimeo.com/video/'+d.options.video.id+"?api=1&title=0&byline=0&portrait=0&playbar=0&loop="+d.options.loop+"&autoplay="+(1===d.options.autoplay?1:0)+"&player_id="+d.options.id+'-okplayer" frameborder="0" style="'+a(this).attr("style")+'visibility:hidden;background-color:black;" id="'+a(this).attr("id")+'"></iframe>'}),d.insertJS("//a.vimeocdn.com/js/froogaloop2.min.js",function(){vimeoPlayerReady()})},d.insertJS=function(a,b){var c=document.createElement("script");b&&(c.readyState?c.onreadystatechange=function(){("loaded"===c.readyState||"complete"===c.readyState)&&(c.onreadystatechange=null,b())}:c.onload=function(){b()}),c.src=a;var d=document.getElementsByTagName("script")[0];d.parentNode.insertBefore(c,d)},d.determineProvider=function(){var a=document.createElement("a");if(a.href=d.options.video,/youtube.com/.test(d.options.video))return{provider:"youtube",id:a.href.slice(a.href.indexOf("v=")+2).toString()};if(/vimeo.com/.test(d.options.video))return{provider:"vimeo",id:a.href.split("/")[3].toString()};if(/[-A-Za-z0-9_]+/.test(d.options.video)){var b=new String(d.options.video.match(/[-A-Za-z0-9_]+/));if(11==b.length)return{provider:"youtube",id:b.toString()};for(var c=0;c<d.options.video.length;c++)if("number"!=typeof parseInt(d.options.video[c]))throw"not vimeo but thought it was for a sec";return{provider:"vimeo",id:d.options.video}}throw"OKVideo: Invalid video source"},d.init()},a.okvideo.options={source:null,video:null,playlist:{list:null,index:0,startSeconds:0,suggestedQuality:"default"},disableKeyControl:1,captions:0,loop:1,hd:1,cover:1,volume:50,adproof:!1,unstarted:null,onFinished:null,onReady:null,onPlay:null,onPause:null,buffering:null,controls:!1,autoplay:!0,annotations:!0,cued:null},a.fn.okvideo=function(b){return b.target=this,this.each(function(){new a.okvideo(b)})}}(jQuery),OKEvents={yt:{ready:function(a){var b=OKEvents.utils.getPlayerOptions(a.target);a.target.setVolume(b.volume),1!==b.autoplay||OKEvents.utils.isMobile()||(b.playlist.list?a.target.loadPlaylist(b.playlist.list,b.playlist.index,b.playlist.startSeconds,b.playlist.suggestedQuality):a.target.playVideo()),OKEvents.utils.isFunction(b.onReady)&&b.onReady()},onStateChange:function(a){var b=OKEvents.utils.getPlayerOptions(a.target);switch(a.data){case-1:OKEvents.utils.isFunction(b.unstarted)&&b.unstarted();break;case 0:OKEvents.utils.isFunction(b.onFinished)&&b.onFinished(),b.loop&&!OKEvents.utils.isMobile()&&a.target.playVideo();break;case 1:OKEvents.utils.isFunction(b.onPlay)&&b.onPlay();break;case 2:OKEvents.utils.isFunction(b.onPause)&&b.onPause();break;case 3:OKEvents.utils.isFunction(b.buffering)&&b.buffering();break;case 5:OKEvents.utils.isFunction(b.cued)&&b.cued();break;default:throw"OKVideo: received invalid data from YT player."}},error:function(a){throw a}},v:{onReady:function(a){var b=jQuery("#"+a).parents(".okvideo").data("okoptions");OKEvents.utils.isFunction(b.onReady)&&b.onReady()},onPlay:function(a){var b=jQuery("#"+a).parents(".okvideo").data("okoptions");OKEvents.utils.isMobile()||player.api("setVolume",b.volume),OKEvents.utils.isFunction(b.onPlay)&&b.onPlay()},onPause:function(a){var b=jQuery("#"+a).parents(".okvideo").data("okoptions");OKEvents.utils.isFunction(b.onPause)&&b.onPause()},onFinish:function(a){var b=jQuery("#"+a).parents(".okvideo").data("okoptions");OKEvents.utils.isFunction(b.onFinish)&&b.onFinish()}},utils:{isFunction:function(a){return"function"==typeof a?!0:!1},isMobile:function(){return navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry)/)?!0:!1},getPlayerOptions:function(a){var b=null;return jQuery.each(Object.getOwnPropertyNames(a),function(c,d){"undefined"!=typeof a[d].id&&"div"===a[d].tagName.toLowerCase()&&a[d].id.indexOf("okplayer")>-1&&(b=jQuery("#"+a[d].id).parents(".okvideo").data("okoptions"))}),b}}};